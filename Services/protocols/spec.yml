models:
- name: StartGame
  desc: 説明
  properties:
  - name: sceneName
    type: string
  - name: sceneNum
    type: integer
    def:  10
  - name: isSwitch
    type: boolean
    def:  true
  - name: users
    type: list
    cont: User
- name: User
  desc: 説明
  properties:
  - name: userName
    type: string

templates:
  - projects_path: /generate/nodejs
    generate_path: protocols/cmd.js
    template: |
      // auto generated by protocols.
      module.exports = {};
      module.exports.API = {};
      module.exports.API.MATCHING_REQUEST  = 1;
      module.exports.API.MATCHING_RESPONSE = 2;

  - projects_path: /generate/nodejs
    generate_path: protocols/models.js
    template: |
      // auto generated by protocols.
      module.exports = {};
      <% models.each do |t| %>
      // <%= t["title"] %>
      module.exports.<%= t["name"] %> = function() {
        return {
        <%- t["properties"].each do |p| -%>
        <%- case p["type"]
             when "string" -%>
            <%= p["name"] %>: <%= (p.key?("def"))? "\"#{p["def"]}\"" : "null" %>,
        <%- when "integer" -%>
            <%= p["name"] %>: <%= (p.key?("def"))? "#{p["def"]}" : 0 %>,
        <%- when "boolean" -%>
            <%= p["name"] %>: <%= (p.key?("def"))? "#{p["def"]}" : false %>,
        <%- when "list" -%>
            <%= p["name"] %>: [],
        <%- end -%>
        <%- end -%>
        };
      }
      <% end %>

  - projects_path: /generate/nodejs
    generate_path: protocols/index.js
    template: |
      // auto generated by protocols.
      module.exports.Models = require('./models.js');
      module.exports.CMD    = require('./cmd.js');

  - projects_path: /generate/cs
    generate_path: Protocols/Models.cs
    template: |
      // auto generated by protocols.
      namespace Protocols.Models {
          // TODO
      }

  - projects_path: /generate/cs
    generate_path: Protocols/CMD.cs
    template: |
      // auto generated by protocols.
      namespace Protocols.CMD {
          // TODO
      }
