models:
- name: StartGame
  desc: 説明
  properties:
  - name: sceneName
    type: string
  - name: sceneNum
    type: integer
    def:  10
  - name: isSwitch
    type: boolean
    def:  true
  - name: users
    type: list
    cont: User
- name: User
  desc: 説明
  properties:
  - name: userName
    type: string

templates:
  - desc: nodejs
    projects_path: /generate/nodejs
    generate_path: protocols/services.js
    template: |
      // NOTE auto generated by 'protocols'.
      module.exports = {};
      <% models.each do |t| %>
      // <%= t["desc"] %>
      module.exports.<%= t["name"] %> = function() {
        return {
        <%- t["properties"].each do |p| -%>
        <%- case p["type"]
             when "string" -%>
            <%= p["name"] %>: <%= (p.key?("def"))? "\"#{p["def"]}\"" : "null" %>,
        <%- when "integer" -%>
            <%= p["name"] %>: <%= (p.key?("def"))? "#{p["def"]}" : 0 %>,
        <%- when "boolean" -%>
            <%= p["name"] %>: <%= (p.key?("def"))? "#{p["def"]}" : false %>,
        <%- when "list" -%>
            <%= p["name"] %>: [],
        <%- end -%>
        <%- end -%>
        };
      }
      <% end %>

  - desc: cs
    projects_path: /generate/cs
    generate_path: Protocols/Services.cs
    template: |
      // NOTE auto generated by 'protocols'.
      // TODO

