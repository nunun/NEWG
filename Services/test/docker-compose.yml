version: '3.3'
services:
  test_server:
    image: test/test_server
    build: ./test_server
    environment:
      - LOG_LEVEL=debug
    volumes:
      - ./test_server/app:/app
      - ../.libservices:/usr/local/lib/node_modules/libservices

  test_client:
    image: test/test_client
    build: ./test_client
    environment:
      - LOG_LEVEL=debug
    volumes:
      - ./test_client/app:/app
      - ../.libservices:/usr/local/lib/node_modules/libservices
    depends_on:
      - test_server
      - redis

  redis:
    image: redis:4.0.6-alpine

